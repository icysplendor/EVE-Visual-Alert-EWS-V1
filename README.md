# EVE Visual Alert (EWS) - 用户使用手册

**EVE Visual Alert** 是一款基于计算机视觉（OpenCV）的 EVE Online 外部辅助工具。它通过监控屏幕特定区域的像素变化，利用模板匹配技术识别敌对信号、怪物刷新及探针扫描结果，并提供多维度的音频报警。

---

## 🛑 核心前置要求 (必读)

在启动软件前，请务必确保游戏设置符合以下要求，否则软件将**无法正常工作**：

1.  **界面缩放比必须为 100%**
    *   请在 EVE 游戏设置 -> 显示设置 -> UI 缩放 (UI Scaling) 中设置为 **100%**。
    *   *原因：计算机视觉是基于像素点比对的，缩放会导致图标像素模糊或变形，导致识别失败。*

2.  **禁用窗口浅色背景 (强烈推荐)**
    *   请在游戏内聊天窗口、总览窗口的设置中，**取消勾选**“开启浅色背景”或将透明度调低。
    *   *原因：星云背景的变化会干扰图像识别，纯深色背景能大幅提高识别准确率。*

---

## ✨ 功能概览

本软件提供以下 5 大核心侦测功能：

1.  **本地 (Local) 敌对预警**：监控本地聊天栏成员列表，识别非友军（非绿/蓝）的敌对图标。
2.  **总览 (Overview) 敌对预警**：监控总览列表，识别出现在视距内的敌对舰船。
3.  **刷怪 (Rats) 状态监控**：监控总览中的 NPC 怪物，用于判定当前是否正在刷怪（配合混合警报逻辑）。
4.  **探针 (Probe) 扫描预警**：监控定向扫描（D-Scan）结果窗口，当您按 `V` 键扫描出作战探针时发出独立警报。
5.  **防呆/待机提醒**：当软件已打开但**未点击“启动监控”**时，每 2 分钟发出一次提示音，防止您忘记开启防御系统。

---

## 🛠️ 详细使用指南

### 1. 素材准备 (Assets)
软件通过比对图片来识别威胁。请确保根目录下的 `assets` 文件夹内包含正确的图标模板（`.png` 格式，推荐透明背景）：
*   `assets/hostile_icons_local`: 放入本地栏的敌对图标（如红星、白名、橙色骷髅等）。
*   `assets/hostile_icons_overview`: 放入总览栏的敌对舰船图标。
*   `assets/monster_icons`: 放入 NPC 怪物的图标或名字截图。
*   `assets/probe_icons`: 放入定向扫描窗口中“作战探针”的名字截图或图标。

### 2. 监控区域设定 (Sectors)
启动软件后，请依次点击以下按钮进行区域框选：

*   **Local (本地栏)**:
    *   点击按钮，框选本地聊天窗口中**显示人物图标**的那一列。
    *   *(此处请插入本地栏框选示例图片)*
*   **Overview (总览栏)**:
    *   点击按钮，框选总览窗口中**显示舰船图标**的那一列。
    *   *(此处请插入总览栏框选示例图片)*
*   **Rats (怪物栏)**:
    *   通常框选总览中显示 NPC **名字或图标**的区域。
*   **Probe (探针扫描)**:
    *   打开定向扫描窗口，点击按钮，框选扫描结果列表中**显示物体名字**的区域。
    *   **注意**：此功能需要您在游戏中手动按 `V` 键刷新扫描结果，软件负责识别结果中是否包含作战探针。
    *   *(此处请插入定向扫描框选示例图片)*

### 3. 阈值与音频设置 (Settings)
*   **阈值 (Thresholds)**: 建议默认 **0.95**。如果发现漏报，可尝试降至 0.85；如果误报，请调高。
*   **音频选择**: 点击 `...` 按钮为每个功能选择 `.wav` 或 `.mp3` 警报音。

### 4. 启动与停止
*   点击 **ENGAGE (启动监控)** 开始运行。
*   点击 **VIEW (实时画面)** 可查看机器视觉当前“看到”的图像，用于调试框选区域是否正确。

---

## 📊 实时日志说明

软件底部的日志窗口会实时显示当前的检测状态。格式如下：

`[14:30:05] ✅ 安全 [L:0(0.00) | O:0(0.00) | M:1(0.98) | P:0(0.00)]`

**参数详解：**
*   **L (Local)**: 本地威胁状态。`0`=无，`1`=有。括号内为相似度分数（0.00-1.00）。
*   **O (Overview)**: 总览威胁状态。
*   **M (Monster)**: 怪物状态。
*   **P (Probe)**: 探针状态。

**特殊逻辑说明：**
*   **智能友军过滤**：在 Local 和 Overview 模式下，如果识别到的图标区域包含大量**绿色像素**（判定为舰队/同盟成员），软件会自动忽略该威胁，日志中不会触发报警。

---

## 🔊 警报声音模式说明

本软件采用 **优先级逻辑** + **独立通道** 的混合音频系统：

### A. 主威胁警报 (互斥播放，有优先级)
以下三种情况同时发生时，**只播放优先级最高**的一种声音，避免声音嘈杂：

1.  **混合警报 (Mixed Threat)** - **[优先级最高]**
    *   **触发条件**：同时检测到 **怪物 (M)** 和 **本地/总览威胁 (L/O)**。
    *   **场景**：您正在刷怪，且敌对进场。这是最危险的情况，需要立即停手。
2.  **总览警报 (Overview)** - **[优先级中]**
    *   **触发条件**：检测到总览有敌对，但没有检测到怪物。
    *   **场景**：敌对出现在格子上（可能在赶路或隐身解除）。
3.  **本地警报 (Local)** - **[优先级低]**
    *   **触发条件**：仅本地有敌对，总览无敌对。
    *   **场景**：敌对进入星系，但尚未出现在您的视野内。

### B. 探针警报 (独立通道，可叠加)
*   **探针 (Probe)**
    *   **触发条件**：定向扫描结果中发现作战探针模板。
    *   **声音逻辑**：**独立播放**。这意味着如果主威胁警报正在响，探针警报会**叠加**在上面同时响起。
    *   **作用**：让您在刷怪时只需按 V，无需盯着扫描窗口，听到特定音效即代表被扫描。

### C. 防呆/待机提醒 (Idle Alert)
*   **待机 (Idle)**
    *   **触发条件**：软件已打开，但处于 **STOP (停止)** 状态超过 2 分钟。
    *   **作用**：防止您上线后打开了软件，却忘记点击“启动监控”，导致“裸奔”被抓。

---

## ⚠️ 免责声明

本软件仅作为屏幕阅读辅助工具，不包含任何内存读取或自动化输入操作。但在使用任何第三方工具时，请务必遵守 EVE Online 的服务条款 (EULA/TOS)。使用者需自行承担所有风险。
